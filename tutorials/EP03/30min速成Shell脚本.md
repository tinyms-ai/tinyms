# 30miné€ŸæˆShellè„šæœ¬

[toc]

## ä¸€ã€shellæ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘ä»¬å¸¸è¯´çš„shellè„šæœ¬ï¼Œæ˜¯ä¸€ç§ä¸ºshellç¼–å†™çš„è„šæœ¬ç¨‹åºï¼Œshellç¼–ç¨‹éå¸¸ç®€æ´ï¼Œåªéœ€è¦åœ¨æœ‰ä¸€ä¸ªèƒ½å†™ä»£ç çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ¯”å¦‚ä¸Šæ–‡æåˆ°çš„vimï¼Œå’Œèƒ½è§£é‡Šæ‰§è¡Œçš„è„šæœ¬è§£é‡Šå™¨å°±è¡Œã€‚å…ˆçœ‹ä¸€ä¸‹ä½ çš„ç”µè„‘é‡Œè£…äº†å“ªäº›shellå‘¢ï¼Ÿ

è¾“å…¥ï¼šcat  /etc/shells

```bash
# List of acceptable shells for chpass(1).
# Ftpd will not allow users to connect who are not using
# one of these shells.

/bin/bash
/bin/csh
/bin/dash
/bin/ksh
/bin/sh
/bin/tcsh
/bin/zsh
```

ä¸€èˆ¬æˆ‘ä»¬å¸¸ç”¨çš„æ˜¯Bashï¼Œä¹Ÿå°±æ˜¯Bourne Again Shellï¼Œä¹Ÿæ˜¯å¤§å¤šæ•°Linuxç³»ç»Ÿé»˜è®¤çš„shellï¼Œä¸è¿‡æˆ‘ä»¬åŸºæœ¬ä¸ä¼šå¯ä»¥åŒºåˆ†Bourne Shell å’Œ Bourne Again Shellï¼Œæ‰€ä»¥åƒ **#!/bin/sh**ï¼Œå®ƒåŒæ ·ä¹Ÿå¯ä»¥æ”¹ä¸º **#!/bin/bash**ã€‚

>  **#!** æ„æ€æ˜¯å‘Šè¯‰ç³»ç»Ÿå…¶åè·¯å¾„æ‰€æŒ‡å®šçš„ç¨‹åºå³æ˜¯è§£é‡Šæ­¤è„šæœ¬æ–‡ä»¶çš„ Shell ç¨‹åº

### å¦‚ä½•è¿è¡Œshellæ–‡ä»¶ï¼Ÿ

- **1.**ä½œä¸ºå¯æ‰§è¡Œç¨‹åº

vi hello.sh

```bash
chmod +x ./test.sh #ä½¿è„šæœ¬å…·æœ‰æ‰§è¡Œæƒé™

./test.sh #æ‰§è¡Œè„šæœ¬

```

> æ³¨æ„æ‰§è¡Œçš„æ—¶å€™ä¸€å®šè¦å†™æˆ **./test.sh**ï¼Œè€Œä¸æ˜¯ **test.sh**ï¼Œè¿è¡Œå…¶å®ƒäºŒè¿›åˆ¶çš„ç¨‹åºä¹Ÿä¸€æ ·ï¼Œç›´æ¥å†™ test.shï¼Œlinux ç³»ç»Ÿä¼šå» PATH é‡Œå¯»æ‰¾æœ‰æ²¡æœ‰å« test.sh çš„ï¼Œè€Œåªæœ‰ /bin, /sbin, /usr/binï¼Œ/usr/sbin ç­‰åœ¨ PATH é‡Œï¼Œä½ çš„å½“å‰ç›®å½•é€šå¸¸ä¸åœ¨ PATH é‡Œï¼Œæ‰€ä»¥å†™æˆ test.sh æ˜¯ä¼šæ‰¾ä¸åˆ°å‘½ä»¤çš„ï¼Œè¦ç”¨ ./test.sh å‘Šè¯‰ç³»ç»Ÿè¯´ï¼Œå°±åœ¨å½“å‰ç›®å½•æ‰¾ã€‚

- **2**.ä½œä¸ºè§£é‡Šå™¨å‚æ•°

è¿™ç§è¿è¡Œæ–¹å¼æ˜¯ï¼Œç›´æ¥è¿è¡Œè§£é‡Šå™¨ï¼Œå…¶å‚æ•°å°±æ˜¯ shell è„šæœ¬çš„æ–‡ä»¶åï¼Œå¦‚ï¼š

```bash
sh test.sh
bash test.sh
```

## äºŒã€å˜é‡å’Œå‚æ•°

### 2.1 å˜é‡

```bash
#!/bin/bash
# è„šæœ¬çš„ç¬¬ä¸€è¡Œå« shebangï¼Œç”¨æ¥å‘ŠçŸ¥ç³»ç»Ÿå¦‚ä½•æ‰§è¡Œè¯¥è„šæœ¬:

# æ˜¾ç¤º â€œHello world!â€
echo Hello world!

# æ¯ä¸€å¥æŒ‡ä»¤ä»¥æ¢è¡Œæˆ–åˆ†å·éš”å¼€ï¼š
echo 'This is the Day One Tutorial'; echo 'This is Day Two Tutorial'

# å£°æ˜ä¸€ä¸ªå˜é‡ï¼š
a="Hello TinyMS"

# ä¸‹é¢æ˜¯é”™è¯¯çš„åšæ³•ï¼š
a = "Hello TinyMS"
# Bash ä¼šæŠŠ a å½“åšä¸€ä¸ªæŒ‡ä»¤ï¼Œç”±äºæ‰¾ä¸åˆ°è¯¥æŒ‡ä»¤ï¼Œå› æ­¤è¿™é‡Œä¼šæŠ¥é”™ã€‚

# ä¹Ÿä¸å¯ä»¥è¿™æ ·ï¼š
a= 'Hello TinyMS'
# Bash ä¼šè®¤ä¸º 'Helloï¼ŒTinyMS' æ˜¯ä¸€æ¡æŒ‡ä»¤ï¼Œç”±äºæ‰¾ä¸åˆ°è¯¥æŒ‡ä»¤ï¼Œè¿™é‡Œå†æ¬¡æŠ¥é”™ã€‚
# ï¼ˆè¿™ä¸ªä¾‹å­ä¸­ 'a=' è¿™éƒ¨åˆ†ä¼šè¢«å½“ä½œä»…å¯¹ 'Helloï¼ŒTinyMS' èµ·ä½œç”¨çš„èµ‹å€¼ã€‚ï¼‰

# ä½¿ç”¨å˜é‡ï¼š
echo $a
echo "$a"
echo '$a'
# å½“ä½ èµ‹å€¼ (assign) ã€å¯¼å‡º (export)ï¼Œæˆ–è€…ä»¥å…¶ä»–æ–¹å¼ä½¿ç”¨å˜é‡æ—¶ï¼Œå˜é‡åå‰ä¸åŠ  $ã€‚
# å¦‚æœè¦ä½¿ç”¨å˜é‡çš„å€¼ï¼Œ åˆ™è¦åŠ  $ã€‚
# æ³¨æ„ï¼š ' (å•å¼•å·) ä¸ä¼šå±•å¼€å˜é‡ï¼ˆå³ä¼šå±è”½æ‰å˜é‡ï¼‰ã€‚

# åœ¨å˜é‡å†…éƒ¨è¿›è¡Œå­—ç¬¦ä¸²ä»£æ¢
echo ${a/Hello/Hi}
# ä¼šæŠŠ a ä¸­é¦–æ¬¡å‡ºç°çš„ "some" æ›¿æ¢æˆ â€œAâ€ã€‚

# å˜é‡çš„æˆªå–
Length=6
echo ${a:0:Length}
# è¿™æ ·ä¼šä»…è¿”å›å˜é‡å€¼çš„å‰7ä¸ªå­—ç¬¦

# å˜é‡çš„é»˜è®¤å€¼
echo ${a:-"DefaultValueIfFooIsMissingOrEmpty"}
# å¯¹ null (Foo=) å’Œç©ºä¸² (Foo="") èµ·ä½œç”¨ï¼› é›¶ï¼ˆFoo=0ï¼‰æ—¶è¿”å›0
# æ³¨æ„è¿™ä»…è¿”å›é»˜è®¤å€¼è€Œä¸æ˜¯æ”¹å˜å˜é‡çš„å€¼

```

å‡ ä¸ªå†…ç½®å˜é‡

| å‚æ•°å¤„ç† | è¯´æ˜                                                         |
| :------- | :----------------------------------------------------------- |
| $#       | ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•°                                         |
| $*       | ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°ã€‚ å¦‚"$*"ç”¨ã€Œ"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥"$1 $2 â€¦ $n"çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ |
| $$       | è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå·                                       |
| $!       | åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„IDå·                                 |
| $@       | ä¸$*ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ—¶åŠ å¼•å·ï¼Œå¹¶åœ¨å¼•å·ä¸­è¿”å›æ¯ä¸ªå‚æ•°ã€‚ å¦‚"$@"ç”¨ã€Œ"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥"$1" "$2" â€¦ "$n" çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ |
| $-       | æ˜¾ç¤ºShellä½¿ç”¨çš„å½“å‰é€‰é¡¹ï¼Œä¸[setå‘½ä»¤](https://www.runoob.com/linux/linux-comm-set.html)åŠŸèƒ½ç›¸åŒã€‚ |
| $?       | æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–ä»»ä½•å€¼è¡¨æ˜æœ‰é”™è¯¯ã€‚ |

```bash
# å†…ç½®å˜é‡ï¼š
echo "Last program return value: $?"
echo "Script's PID: $$"
echo "Number of arguments: $#"
echo "Scripts arguments: $@"
echo "Scripts arguments separated in different as: $1 $2..."
```

$* ä¸ $@ åŒºåˆ«ï¼š

- ç›¸åŒç‚¹ï¼šéƒ½æ˜¯å¼•ç”¨æ‰€æœ‰å‚æ•°ã€‚
- ä¸åŒç‚¹ï¼šåªæœ‰åœ¨åŒå¼•å·ä¸­ä½“ç°å‡ºæ¥ã€‚å‡è®¾åœ¨è„šæœ¬è¿è¡Œæ—¶å†™äº†ä¸‰ä¸ªå‚æ•° 1ã€2ã€3ï¼Œï¼Œåˆ™ " * " ç­‰ä»·äº "1 2 3"ï¼ˆä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼‰ï¼Œè€Œ "@" ç­‰ä»·äº "1" "2" "3"ï¼ˆä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼‰ã€‚

```bash
#!/bin/bash

echo "-- \$* example ---"
for i in "$*"; do
    echo $i
done

echo "-- \$@ example ---"
for i in "$@"; do
    echo $i
done
```

æ‰§è¡Œè„šæœ¬ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ chmod +x test.sh 
$ ./test.sh 1 2 3
-- $* example ---
1 2 3
-- $@ example ---
1
2
3
```

### 2.2 ä¼ é€’å‚æ•°

- è¯»å–è¾“å…¥ï¼š

```bash
echo "What's your name?"
read Name # è¿™é‡Œä¸éœ€è¦å£°æ˜æ–°å˜é‡ï¼Œè¾“å…¥è‡ªå·±çš„åå­—
# åœ¨å±å¹•è¾“å…¥ä½ çš„åå­—ï¼Œè¿™é‡Œæˆ‘è¾“å…¥çš„æ˜¯Charlotte
echo Hello, $Name!
```
è¾“å‡ºç»“æœï¼š
```bash
Hello,Charlotte
```

- ä¼ é€’å‚æ•°

```bash
#!/bin/bash

echo "Shell ä¼ é€’å‚æ•°ï¼";
echo "æ‰§è¡Œçš„æ–‡ä»¶åï¼š$0";
echo "ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š$1";
echo "ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š$2";
echo "ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š$3";
```
è¾“å‡ºç»“æœï¼š
```bash
$ sh test.sh 1 2 3
Shell ä¼ é€’å‚æ•°å®ä¾‹ï¼
æ‰§è¡Œçš„æ–‡ä»¶åï¼š./test.sh
ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š1
ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š2
ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š3

```

## ä¸‰ã€shellæ•°ç»„

Bash Shell åªæ”¯æŒä¸€ç»´æ•°ç»„ï¼ˆä¸æ”¯æŒå¤šç»´æ•°ç»„ï¼‰ï¼Œåˆå§‹åŒ–æ—¶ä¸éœ€è¦å®šä¹‰æ•°ç»„å¤§å°ï¼ˆä¸ PHP ç±»ä¼¼ï¼‰ã€‚

- åˆ›å»ºæ•°ç»„

æ ¼å¼ï¼š

```bash
array_name=(value1 value2 ... valuen)
```

ä¸¾ä¾‹ï¼š

```bash
test_array=(this is shell tutorial)
```

- è¯»å–æ•°ç»„

æ ¼å¼ï¼š

```bash
${array_name[index]}
```

ä¸¾ä¾‹ï¼š

```bash
#!/bin/bash

test_array=(this is shell tutorial)

echo "ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º: ${test_array[0]}"
echo "ç¬¬äºŒä¸ªå…ƒç´ ä¸º: ${test_array[1]}"
echo "ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸º: ${test_array[2]}"
echo "ç¬¬å››ä¸ªå…ƒç´ ä¸º: ${test_array[3]}"
```

è¾“å‡ºç»“æœï¼š

```bash
root@73df419e7539:~# sh array.sh
ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º: this
ç¬¬äºŒä¸ªå…ƒç´ ä¸º: is
ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸º: shell
ç¬¬å››ä¸ªå…ƒç´ ä¸º: tutorial
```

- è·å–æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ 

```bash
#!/bin/bash

test_array[0]=this
test_array[1]=is
test_array[2]=shell
test_array[3]=tutorial

echo "æ•°ç»„çš„å…ƒç´ ä¸º: ${test_array[*]}"
echo "æ•°ç»„çš„å…ƒç´ ä¸º: ${test_array[@]}"
```

- è·å–æ•°ç»„çš„é•¿åº¦

```bash
#!/bin/bash

test_array[0]=this
test_array[1]=is
test_array[2]=shell
test_array[3]=tutorial

echo "æ•°ç»„çš„å…ƒç´ ä¸º: ${#test_array[*]}"
echo "æ•°ç»„çš„å…ƒç´ ä¸º: ${#test_array[@]}"
```

- ç”¨for å¾ªç¯éå†æ•°ç»„

```bash
#!/bin/bash
  arr=(1 2 3 4 5 6 7 8 9 10)
  for a in ${arr[*]}
  do
    echo $a
  done
```

- ç”¨whileå¾ªç¯è¾“å‡ºæ•°ç»„

```bash
arr=(1 2 3 4 5 6 7 8 9 10)
i=0
while [ $i -lt ${#arr[@]} ]
do
  echo ${arr[$i]}
  let i++
done
```

## å››ã€shellè¿ç®—ç¬¦

Shell å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæ”¯æŒå¤šç§è¿ç®—ç¬¦ï¼ŒåŒ…æ‹¬ï¼š

- ç®—æ•°è¿ç®—ç¬¦
- å…³ç³»è¿ç®—ç¬¦
- å¸ƒå°”è¿ç®—ç¬¦
- å­—ç¬¦ä¸²è¿ç®—ç¬¦
- æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦

ä¾‹å¦‚ä¸¤æ•°ç›¸åŠ ï¼š

```bash
#!/bin/bash

val=`expr 2 + 2` 
val_1=$(expr 10 + 20)
echo "ä¸¤æ•°ä¹‹å’Œä¸º : $val"
echo "ä¸¤æ•°ä¹‹å’Œä¸º : $val_1"
```

> ä¸¤ç‚¹æ³¨æ„ï¼š
>
> - è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦ä¹‹é—´è¦æœ‰ç©ºæ ¼ï¼Œä¾‹å¦‚ 2+2 æ˜¯ä¸å¯¹çš„ï¼Œå¿…é¡»å†™æˆ 2 + 2ã€‚
> - å®Œæ•´çš„è¡¨è¾¾å¼è¦è¢« *``* åŒ…å«ï¼Œæ³¨æ„è¿™ä¸ªå­—ç¬¦ä¸æ˜¯å¸¸ç”¨çš„å•å¼•å·ï¼Œåœ¨ Esc é”®ä¸‹è¾¹ã€‚




-  ### ç®—æœ¯è¿ç®—ç¬¦

  ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„ç®—æœ¯è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º 10ï¼Œå˜é‡ b ä¸º 20ï¼š

  | è¿ç®—ç¬¦ | è¯´æ˜                                          | ä¸¾ä¾‹                          |
  | :----- | :-------------------------------------------- | :---------------------------- |
  | +      | åŠ æ³•                                          | `expr $a + $b` ç»“æœä¸º 30ã€‚    |
  | -      | å‡æ³•                                          | `expr $a - $b` ç»“æœä¸º -10ã€‚   |
  | *      | ä¹˜æ³•                                          | `expr $a \* $b` ç»“æœä¸º  200ã€‚ |
  | /      | é™¤æ³•                                          | `expr $b / $a` ç»“æœä¸º 2ã€‚     |
  | %      | å–ä½™                                          | `expr $b % $a` ç»“æœä¸º 0ã€‚     |
  | =      | èµ‹å€¼                                          | a=$b å°†æŠŠå˜é‡ b çš„å€¼èµ‹ç»™ aã€‚  |
  | ==     | ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œç›¸åŒåˆ™è¿”å› trueã€‚     | [ $a == $b ] è¿”å› falseã€‚     |
  | !=     | ä¸ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œä¸ç›¸åŒåˆ™è¿”å› trueã€‚ | [ $a != $b ] è¿”å› trueã€‚      |

  **æ³¨æ„ï¼š**æ¡ä»¶è¡¨è¾¾å¼è¦æ”¾åœ¨æ–¹æ‹¬å·ä¹‹é—´ï¼Œå¹¶ä¸”è¦æœ‰ç©ºæ ¼ï¼Œä¾‹å¦‚: **[$a==$b]** æ˜¯é”™è¯¯çš„ï¼Œå¿…é¡»å†™æˆ **[ $a == $b ]**ã€‚

```bash
#!/bin/bash

a=10
b=20

val=`expr $a + $b`
echo "a + b : $val"

val=`expr $a - $b`
echo "a - b : $val"

val=`expr $a \* $b`
echo "a * b : $val"

val=`expr $b / $a`
echo "b / a : $val"

val=`expr $b % $a`
echo "b % a : $val"

if [ $a == $b ]
then
   echo "a ç­‰äº b"
fi
if [ $a != $b ]
then
   echo "a ä¸ç­‰äº b"
fi
```

è¾“å‡ºç»“æœï¼š

```bash
a + b : 30
a - b : -10
a * b : 200
b / a : 2
b % a : 0
a ä¸ç­‰äº b
```



### å…³ç³»è¿ç®—ç¬¦

å…³ç³»è¿ç®—ç¬¦åªæ”¯æŒæ•°å­—ï¼Œä¸æ”¯æŒå­—ç¬¦ä¸²ï¼Œé™¤éå­—ç¬¦ä¸²çš„å€¼æ˜¯æ•°å­—ã€‚

ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„å…³ç³»è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º 10ï¼Œå˜é‡ b ä¸º 20ï¼š

| è¿ç®—ç¬¦ | è¯´æ˜                                                  | ä¸¾ä¾‹                       |
| :----- | :---------------------------------------------------- | :------------------------- |
| -eq    | æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚                   | [ $a -eq $b ] è¿”å› falseã€‚ |
| -ne    | æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ä¸ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚               | [ $a -ne $b ] è¿”å› trueã€‚  |
| -gt    | æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚     | [ $a -gt $b ] è¿”å› falseã€‚ |
| -lt    | æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚     | [ $a -lt $b ] è¿”å› trueã€‚  |
| -ge    | æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ | [ $a -ge $b ] è¿”å› falseã€‚ |
| -le    | æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ | [ $a -le $b ] è¿”å› trueã€‚  |

> EQ å°±æ˜¯ EQUALç­‰äº
>
> NE å°±æ˜¯ NOT EQUALä¸ç­‰äº 
>
> GT å°±æ˜¯ GREATER THANå¤§äºã€€ 
>
> LT å°±æ˜¯ LESS THANå°äº 
>
> GE å°±æ˜¯ GREATER THAN OR EQUAL å¤§äºç­‰äº 
>
> LE å°±æ˜¯ LESS THAN OR EQUAL å°äºç­‰äº

ç¤ºä¾‹ï¼š

```bash
#!/bin/bash

a=10
b=20

if [ $a -eq $b ]
then
   echo "$a -eq $b : a ç­‰äº b"
else
   echo "$a -eq $b: a ä¸ç­‰äº b"
fi
if [ $a -ne $b ]
then
   echo "$a -ne $b: a ä¸ç­‰äº b"
else
   echo "$a -ne $b : a ç­‰äº b"
fi
if [ $a -gt $b ]
then
   echo "$a -gt $b: a å¤§äº b"
else
   echo "$a -gt $b: a ä¸å¤§äº b"
fi
if [ $a -lt $b ]
then
   echo "$a -lt $b: a å°äº b"
else
   echo "$a -lt $b: a ä¸å°äº b"
fi
if [ $a -ge $b ]
then
   echo "$a -ge $b: a å¤§äºæˆ–ç­‰äº b"
else
   echo "$a -ge $b: a å°äº b"
fi
if [ $a -le $b ]
then
   echo "$a -le $b: a å°äºæˆ–ç­‰äº b"
else
   echo "$a -le $b: a å¤§äº b"
fi
```



è¾“å‡ºç»“æœï¼š

```bash
10 -eq 20: a ä¸ç­‰äº b
10 -ne 20: a ä¸ç­‰äº b
10 -gt 20: a ä¸å¤§äº b
10 -lt 20: a å°äº b
10 -ge 20: a å°äº b
10 -le 20: a å°äºæˆ–ç­‰äº b
```



### å¸ƒå°”è¿ç®—ç¬¦

ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„å¸ƒå°”è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º 10ï¼Œå˜é‡ b ä¸º 20ï¼š

| è¿ç®—ç¬¦ | è¯´æ˜                                                | ä¸¾ä¾‹                                     |
| :----- | :-------------------------------------------------- | :--------------------------------------- |
| !      | éè¿ç®—ï¼Œè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› falseï¼Œå¦åˆ™è¿”å› trueã€‚ | [ ! false ] è¿”å› trueã€‚                  |
| -o     | æˆ–è¿ç®—ï¼Œæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› trueã€‚           | [ $a -lt 20 -o $b -gt 100 ] è¿”å› trueã€‚  |
| -a     | ä¸è¿ç®—ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¸º true æ‰è¿”å› trueã€‚           | [ $a -lt 20 -a $b -gt 100 ] è¿”å› falseã€‚ |

ç¤ºä¾‹

```bash
#!/bin/bash

a=10
b=20

if [ $a != $b ]
then
   echo "$a != $b : a ä¸ç­‰äº b"
else
   echo "$a == $b: a ç­‰äº b"
fi
if [ $a -lt 100 -a $b -gt 15 ]
then
   echo "$a å°äº 100 ä¸” $b å¤§äº 15 : è¿”å› true"
else
   echo "$a å°äº 100 ä¸” $b å¤§äº 15 : è¿”å› false"
fi
if [ $a -lt 100 -o $b -gt 100 ]
then
   echo "$a å°äº 100 æˆ– $b å¤§äº 100 : è¿”å› true"
else
   echo "$a å°äº 100 æˆ– $b å¤§äº 100 : è¿”å› false"
fi
if [ $a -lt 5 -o $b -gt 100 ]
then
   echo "$a å°äº 5 æˆ– $b å¤§äº 100 : è¿”å› true"
else
   echo "$a å°äº 5 æˆ– $b å¤§äº 100 : è¿”å› false"
fi

```
è¾“å‡ºç»“æœï¼š

```bash
10 != 20 : a ä¸ç­‰äº b
10 å°äº 100 ä¸” 20 å¤§äº 15 : è¿”å› true
10 å°äº 100 æˆ– 20 å¤§äº 100 : è¿”å› true
10 å°äº 5 æˆ– 20 å¤§äº 100 : è¿”å› false
```



### é€»è¾‘è¿ç®—ç¬¦

| è¿ç®—ç¬¦ | è¯´æ˜       | ä¸¾ä¾‹                                       |
| :----- | :--------- | :----------------------------------------- |
| &&     | é€»è¾‘çš„ AND | [[ $a -lt 100 && $b -gt 100 ]] è¿”å› false  |
| \|\|   | é€»è¾‘çš„ OR  | [[ $a -lt 100 \|\| $b -gt 100 ]] è¿”å› true |

ç¤ºä¾‹

```bash
#!/bin/bash

a=10
b=20

if [[ $a -lt 100 && $b -gt 100 ]]
then
   echo "è¿”å› true"
else
   echo "è¿”å› false"
fi

if [[ $a -lt 100 || $b -gt 100 ]]
then
   echo "è¿”å› true"
else
   echo "è¿”å› false"
fi
```



è¾“å‡ºç»“æœï¼š

```bash
è¿”å› false
è¿”å› true
```



### å­—ç¬¦ä¸²è¿ç®—ç¬¦

ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„å­—ç¬¦ä¸²è¿ç®—ç¬¦ï¼Œå‡å®šå˜é‡ a ä¸º "abc"ï¼Œå˜é‡ b ä¸º "efg"ï¼š

| è¿ç®—ç¬¦ | è¯´æ˜                                         | ä¸¾ä¾‹                     |
| :----- | :------------------------------------------- | :----------------------- |
| =      | æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚      | [ $a = $b ] è¿”å› falseã€‚ |
| !=     | æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚  | [ $a != $b ] è¿”å› trueã€‚ |
| -z     | æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸º0è¿”å› trueã€‚        | [ -z $a ] è¿”å› falseã€‚   |
| -n     | æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸ä¸º 0ï¼Œä¸ä¸º 0 è¿”å› trueã€‚ | [ -n "$a" ] è¿”å› trueã€‚  |
| $      | æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚        | [ $a ] è¿”å› trueã€‚       |

ç¤ºä¾‹ï¼š

```bash
#!/bin/bash

a="abc"
b="efg"

if [ $a = $b ]
then
   echo "$a = $b : a ç­‰äº b"
else
   echo "$a = $b: a ä¸ç­‰äº b"
fi
if [ $a != $b ]
then
   echo "$a != $b : a ä¸ç­‰äº b"
else
   echo "$a != $b: a ç­‰äº b"
fi
if [ -z $a ]
then
   echo "-z $a : å­—ç¬¦ä¸²é•¿åº¦ä¸º 0"
else
   echo "-z $a : å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º 0"
fi
if [ -n "$a" ]
then
   echo "-n $a : å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º 0"
else
   echo "-n $a : å­—ç¬¦ä¸²é•¿åº¦ä¸º 0"
fi
if [ $a ]
then
   echo "$a : å­—ç¬¦ä¸²ä¸ä¸ºç©º"
else
   echo "$a : å­—ç¬¦ä¸²ä¸ºç©º"
fi
```

è¾“å‡ºç»“æœï¼š

```bash
abc = efg: a ä¸ç­‰äº b
abc != efg : a ä¸ç­‰äº b
-z abc : å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º 0
-n abc : å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º 0
abc : å­—ç¬¦ä¸²ä¸ä¸ºç©º
```

## äº”ã€Shell testå‘½ä»¤

Shellä¸­çš„ test å‘½ä»¤ç”¨äºæ£€æŸ¥æŸä¸ªæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå®ƒå¯ä»¥è¿›è¡Œæ•°å€¼ã€å­—ç¬¦å’Œæ–‡ä»¶ä¸‰ä¸ªæ–¹é¢çš„æµ‹è¯•ã€‚

### æ•°å€¼æµ‹è¯•

| å‚æ•° | è¯´æ˜           |
| :--- | :------------- |
| -eq  | ç­‰äºåˆ™ä¸ºçœŸ     |
| -ne  | ä¸ç­‰äºåˆ™ä¸ºçœŸ   |
| -gt  | å¤§äºåˆ™ä¸ºçœŸ     |
| -ge  | å¤§äºç­‰äºåˆ™ä¸ºçœŸ |
| -lt  | å°äºåˆ™ä¸ºçœŸ     |
| -le  | å°äºç­‰äºåˆ™ä¸ºçœŸ |

ç¤ºä¾‹

```bash
num1=100
num2=100
if test $[num1] -eq $[num2]
then
    echo 'ä¸¤ä¸ªæ•°ç›¸ç­‰ï¼'
else
    echo 'ä¸¤ä¸ªæ•°ä¸ç›¸ç­‰ï¼'
fi
```

è¾“å‡ºç»“æœï¼š

```
ä¸¤ä¸ªæ•°ç›¸ç­‰ï¼
```

[200~### åˆ¤æ–­æ–‡ä»¶å¤¹/æ–‡ä»¶æ˜¯å¦å­˜åœ¨

æ–‡ä»¶å¤¹ä¸å­˜åœ¨åˆ™åˆ›å»º

```bash
if [ ! -d "/root/test" ];then
  mkdir /root/test
  else
  echo "æ–‡ä»¶å¤¹å·²ç»å­˜åœ¨"
fi
```

æ–‡ä»¶å­˜åœ¨åˆ™åˆ é™¤

```bash
if [ ! -f "/root/test1.sh" ];then
  echo "æ–‡ä»¶ä¸å­˜åœ¨"
  else
  rm -f /root/test1.sh
fi
```

åˆ¤æ–­æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨

```bash
if [ -d "/data/" ];then
  echo "æ–‡ä»¶å¤¹å­˜åœ¨"
  else
  echo "æ–‡ä»¶å¤¹ä¸å­˜åœ¨"
fi
```

åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨

```bash
if [ -f "/data/filename" ];then
  echo "æ–‡ä»¶å­˜åœ¨"
  else
  echo "æ–‡ä»¶ä¸å­˜åœ¨"
fi
```


